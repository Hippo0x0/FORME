# FORME iOS App 工程规划

## 项目概述
FORME 是一个专注于深度持续研究的浏览器应用，旨在帮助用户进行长时间、长周期的研究项目。应用提供资料保存、跨资料关联、开箱即用的分析模型和便捷的索引系统。

## 核心功能

### 1. 研究流程管理
- **Topic启动**：创建新的研究课题
- **5步工作流**：
  1. Boost：激发研究兴趣
  2. Pick Target：选择研究目标
  3. Schedule：制定研究计划
  4. Work-Feedback-Loop：工作反馈循环
  5. Output-Feedback-Loop：输出反馈循环

### 2. 资料管理
- 网页内容保存与标注
- 本地文档导入与管理
- 跨资料关联与引用
- 智能标签系统

### 3. 分析工具
- 内置分析模型
- 数据可视化
- 研究进度追踪
- 成果输出模板

### 4. 索引与检索
- 全文搜索
- 语义搜索
- 标签过滤
- 时间线视图

### 5. 个性化支持
- 阿德勒课题分类（生活、工作、友情、爱情）
- 现实人生课题管理
- 投资课题追踪
- Agent智能辅助

## 技术架构

### 平台支持
- iOS 15.0+
- iPadOS 15.0+
- macOS 13.0+（通过Mac Catalyst）

### 技术栈
- **前端**：Swift + UIKit
- **架构模式**：MVVM
- **包管理**：Swift Package Manager (SPM)
- **图片加载**：Kingfisher
- **数据存储**：Core Data（本地优先）
- **网络**：Alamofire + Async/Await
- **AI集成**：DeepSeek API + 小模型本地推理
- **爬虫引擎**：WebKit + 自定义解析器

### 核心模块
1. **研究管理器**：管理研究课题和工作流
2. **资料库**：处理网页和文档的保存与管理
3. **分析引擎**：运行分析模型和生成洞察
4. **索引系统**：实现快速检索和关联发现
5. **Agent系统**：提供个性化建议和动力支持
6. **DeepSeek集成**：深度研究分析和智能对话

### 数据存储策略
- **本地优先**：所有用户数据优先存储在设备本地
- **Core Data**：使用Core Data进行本地数据管理
- **用户状态**：用户配置、研究进度、资料内容全部本地存储
- **无服务端依赖**：应用核心功能无需网络即可使用
- **可选同步**：未来可添加iCloud或自定义服务端同步
- **数据导出**：支持研究数据和资料的本地导出

### DeepSeek API集成
- **核心功能**：深度研究分析和智能对话
- **API端点**：DeepSeek官方API接口
- **功能范围**：
  1. **文本深度分析**：对研究资料进行深度理解和总结
  2. **关联发现**：发现不同资料间的隐藏关联
  3. **问题解答**：基于研究资料回答相关问题
  4. **洞察生成**：自动生成研究洞察和结论
  5. **研究建议**：提供下一步研究方向的建议
- **使用模式**：
  - **在线模式**：实时调用DeepSeek API进行深度分析
  - **离线模式**：使用本地小模型进行基础分析
  - **混合模式**：重要分析使用API，简单分析使用本地模型
- **API配置**：
  - 用户自行配置API Key
  - 支持免费版和付费版API
  - 用量统计和提醒
  - 请求失败降级处理

## 用户界面设计

### 主要界面
1. **首页**：近期研究、快速启动、进度概览
2. **研究空间**：课题详情、资料集合、分析结果
3. **资料库**：所有保存内容的分类浏览
4. **分析中心**：模型运行、可视化图表
5. **设置**：个性化配置、课题分类管理

### 设计原则
- 专注模式：减少干扰，支持长时间使用
- 渐进式披露：复杂功能按需展示
- 视觉层次：清晰的信息架构
- 一致性：统一的交互模式

## 数据模型

### 核心实体
```swift
struct ResearchTopic {
    let id: UUID
    var title: String
    var description: String
    var status: TopicStatus
    var createdAt: Date
    var updatedAt: Date
    var steps: [ResearchStep]
    var materials: [Material]
    var insights: [Insight]
}

struct Material {
    let id: UUID
    var url: URL?
    var title: String
    var content: String
    var annotations: [Annotation]
    var tags: [Tag]
    var relatedMaterials: [Material]
}

struct Insight {
    let id: UUID
    var title: String
    var content: String
    var generatedBy: AnalysisModel
    var confidence: Double
    var references: [Material]
}
```

## 开发计划

### Phase 1：基础框架（4周）
- 项目初始化与架构搭建
- 核心数据模型实现
- 基础UI组件开发
- 本地数据存储

### Phase 2：核心功能（6周）
- 研究流程管理
- 网页保存与解析
- 基础分析模型
- 简单检索功能

### Phase 3：高级功能（8周）
- Agent智能系统
- 高级分析模型
- 云同步功能
- 个性化推荐

### Phase 4：优化与发布（4周）
- 性能优化
- 用户体验改进
- 测试与调试
- App Store上架

## 质量保证

### 测试策略
- 单元测试：核心业务逻辑
- 集成测试：模块间交互
- UI测试：用户界面流程
- 性能测试：响应时间和内存使用

### 代码规范
- SwiftLint代码规范检查
- 强制代码审查
- 文档化要求
- 持续集成

## 部署与维护

### 发布渠道
- App Store正式发布
- TestFlight测试分发
- 企业内部分发（可选）

### 监控与反馈
- 崩溃报告收集
- 使用数据分析
- 用户反馈渠道
- 定期版本更新

## 竞争分析

### 主要竞品
- 玉伯 YouMind：类似的研究管理工具
- 传统笔记应用：Notion、Obsidian
- 专业研究工具：Zotero、Mendeley

### 差异化优势
1. **专注研究流程**：完整的5步工作流支持
2. **智能分析**：内置AI分析模型
3. **动力系统**：Agent提供的个性化鼓励
4. **课题分类**：基于阿德勒心理学的分类体系

## 风险与挑战

### 技术风险
- AI模型本地推理性能
- 大规模数据检索效率
- 跨平台一致性

### 产品风险
- 用户学习曲线较陡
- 功能复杂度管理
- 市场需求验证

### 应对策略
- 渐进式功能发布
- 用户引导和教育
- 持续用户反馈收集

## 成功指标

### 产品指标
- 用户留存率
- 研究完成率
- 功能使用频率
- 用户满意度

### 技术指标
- 应用崩溃率
- 响应时间
- 内存使用
- 电池影响

## 团队与资源

### 开发团队
- iOS开发工程师：2人
- 后端开发工程师：1人
- 产品设计师：1人
- AI工程师：1人（兼职）

### 开发工具
- Xcode 15+
- Swift Package Manager (SPM)
- GitHub版本控制
- Fastlane自动化
- Firebase分析

---

*最后更新：2025-12-29*